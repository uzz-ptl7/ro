<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Store Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">
    <!-- Main Container -->
    <div class="max-w-7xl mx-auto p-8">

        <!-- Navigation -->
        <div class="mb-4">
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('summary')">Summary</button>
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('sales')">Sales</button>
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('stock')">Stock</button>
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('cash-ledger')">Cash Ledger</button>
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('momo-ledger')">Momo Ledger</button>
            <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"
                onclick="showPage('sales-ledger')">Sales Ledger</button>
        </div>

        <!-- Summary Page -->
        <section id="summary" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Store Summary</h1>
            <div class="grid grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-700">Total Sales</h2>
                    <p id="total-sales" class="text-lg">$0.00</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-700">Cash Balance</h2>
                    <p id="cash-balance" class="text-lg">$0.00</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-700">Mobile Money Balance</h2>
                    <p id="momo-balance" class="text-lg">$0.00</p>
                </div>
            </div>
            <div class="mt-4">
                <h2 class="text-xl font-semibold text-gray-700">Product Stock</h2>
                <div id="product-stock"></div>
            </div>
        </section>

        <!-- Sales Page -->
        <section id="sales" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Sales</h1>
            <form id="sales-form" class="space-y-4">
                <div>
                    <label for="product" class="block text-sm">Product</label>
                    <select id="product" class="border p-2 rounded w-full" required></select>
                </div>
                <div>
                    <label for="quantity" class="block text-sm">Quantity</label>
                    <input id="quantity" type="number" class="border p-2 rounded w-full" required />
                </div>
                <div>
                    <label for="payment-method" class="block text-sm">Payment Method</label>
                    <select id="payment-method" class="border p-2 rounded w-full" required>
                        <option value="cash">Cash</option>
                        <option value="momo">Mobile Money</option>
                    </select>
                </div>
                <div id="momo-id-field" class="hidden">
                    <label for="momo-id" class="block text-sm">Momo Pay ID</label>
                    <input id="momo-id" type="text" class="border p-2 rounded w-full" />
                </div>
                <div>
                    <label for="customer" class="block text-sm">Customer</label>
                    <select id="customer" class="border p-2 rounded w-full" required></select>
                </div>
                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-500">Record
                    Sale</button>
            </form>
        </section>

        <!-- Stock Management Page -->
        <section id="stock" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Stock Management</h1>
            <form id="stock-management-form">
                <div>
                    <label for="stock-product" class="block text-sm">Product</label>
                    <select id="stock-product" class="border p-2 rounded w-full" required></select>
                </div>
                <div>
                    <label for="add-stock-quantity" class="block text-sm">Quantity to Add</label>
                    <input id="add-stock-quantity" type="number" class="border p-2 rounded w-full" required />
                </div>
                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-500">Add
                    Stock</button>
            </form>
        </section>

        <!-- Cash Ledger Page -->
        <section id="cash-ledger" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Cash Ledger</h1>
            <table id="cash-ledger-table" class="w-full mt-4 border-collapse">
                <thead>
                    <tr>
                        <th class="border p-2 text-left">Date</th>
                        <th class="border p-2 text-left">Product</th>
                        <th class="border p-2 text-left">Quantity</th>
                        <th class="border p-2 text-left">Amount</th>
                        <th class="border p-2 text-left">Customer</th>
                    </tr>
                </thead>
                <tbody id="cash-ledger-body"></tbody>
            </table>
        </section>

        <!-- Momo Ledger Page -->
        <section id="momo-ledger" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Momo Ledger</h1>
            <table id="momo-ledger-table" class="w-full mt-4 border-collapse">
                <thead>
                    <tr>
                        <th class="border p-2 text-left">Date</th>
                        <th class="border p-2 text-left">Product</th>
                        <th class="border p-2 text-left">Quantity</th>
                        <th class="border p-2 text-left">Amount</th>
                        <th class="border p-2 text-left">Customer</th>
                        <th class="border p-2 text-left">Momo Pay ID</th>
                    </tr>
                </thead>
                <tbody id="momo-ledger-body"></tbody>
            </table>
        </section>

        <!-- Sales Ledger Page -->
        <section id="sales-ledger" class="section-content mb-12 hidden">
            <h1 class="text-3xl font-semibold mb-4">Sales Ledger</h1>
            <table id="sales-ledger-table" class="w-full mt-4 border-collapse">
                <thead>
                    <tr>
                        <th class="border p-2 text-left">Date</th>
                        <th class="border p-2 text-left">Product</th>
                        <th class="border p-2 text-left">Quantity</th>
                        <th class="border p-2 text-left">Amount</th>
                        <th class="border p-2 text-left">Payment</th>
                        <th class="border p-2 text-left">Customer</th>
                        <th class="border p-2 text-left">Momo Pay ID</th>
                    </tr>
                </thead>
                <tbody id="sales-ledger-body"></tbody>
            </table>
        </section>

        <!-- Add Customer Button -->
        <div class="mt-4">
            <button id="add-customer-button" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-500">Add
                Customer</button>
        </div>
    </div>

    <script>
        const products = [
            { name: "6kg LPG Cylinder", unitPrice: 50, stock: 100 },
            { name: "12kg LPG Cylinder", unitPrice: 100, stock: 50 },
            { name: "15kg LPG Cylinder", unitPrice: 125, stock: 30 },
            { name: "20kg LPG Cylinder", unitPrice: 150, stock: 20 },
            { name: "50kg LPG Cylinder", unitPrice: 300, stock: 10 },
            { name: "Oxygen", unitPrice: 10, stock: 200 },
            { name: "CO2", unitPrice: 20, stock: 150 },
            { name: "Nitrogen", unitPrice: 15, stock: 180 }
        ];

        function showPage(pageId) {
            const pages = ['summary', 'sales', 'stock', 'cash-ledger', 'momo-ledger', 'sales-ledger'];
            pages.forEach(page => document.getElementById(page).classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
        }

        function loadProductOptions() {
            const productSelects = document.querySelectorAll('#product, #stock-product');
            productSelects.forEach(select => {
                select.innerHTML = '<option value="">Select Product</option>';
                products.forEach(product => {
                    const option = document.createElement('option');
                    option.value = product.name;
                    option.textContent = product.name;
                    select.appendChild(option);
                });
            });
        }

        function loadCustomers() {
            const customers = JSON.parse(localStorage.getItem('customers')) || [];
            const customerDropdown = document.getElementById('customer');
            customerDropdown.innerHTML = '<option value="">Select Customer</option>';
            customers.forEach(customer => {
                const option = document.createElement('option');
                option.value = customer.name;
                option.textContent = customer.name;
                customerDropdown.appendChild(option);
            });
        }

        function addCustomer(name) {
            let customers = JSON.parse(localStorage.getItem('customers')) || [];
            customers.push({ name });
            localStorage.setItem('customers', JSON.stringify(customers));
            loadCustomers();
        }

        function updateStock(productName, quantity) {
            const product = products.find(p => p.name === productName);
            if (product) product.stock += quantity;
        }

        function recordTransaction(paymentMethod, product, quantity, amount, customerName, momoId = '') {
            const transaction = {
                date: new Date().toLocaleString(),
                product,
                quantity,
                amount,
                customer: customerName,
                payment: paymentMethod,
                momoId: momoId || ''
            };
            let ledger = JSON.parse(localStorage.getItem(`${paymentMethod}-ledger`)) || [];
            ledger.push(transaction);
            localStorage.setItem(`${paymentMethod}-ledger`, JSON.stringify(ledger));

            updateLedgers();
        }

        function updateLedgers() {
            const cashLedger = JSON.parse(localStorage.getItem('cash-ledger')) || [];
            const momoLedger = JSON.parse(localStorage.getItem('momo-ledger')) || [];
            const allSales = [...cashLedger, ...momoLedger];

            const cashBody = document.getElementById('cash-ledger-body');
            const momoBody = document.getElementById('momo-ledger-body');
            const salesBody = document.getElementById('sales-ledger-body');
            cashBody.innerHTML = '';
            momoBody.innerHTML = '';
            salesBody.innerHTML = '';

            cashLedger.forEach(t => {
                cashBody.innerHTML += `
                    <tr><td class="border p-2">${t.date}</td><td class="border p-2">${t.product}</td><td class="border p-2">${t.quantity}</td><td class="border p-2">$${t.amount.toFixed(2)}</td><td class="border p-2">${t.customer}</td></tr>
                `;
            });

            momoLedger.forEach(t => {
                momoBody.innerHTML += `
                    <tr><td class="border p-2">${t.date}</td><td class="border p-2">${t.product}</td><td class="border p-2">${t.quantity}</td><td class="border p-2">$${t.amount.toFixed(2)}</td><td class="border p-2">${t.customer}</td><td class="border p-2">${t.momoId}</td></tr>
                `;
            });

            allSales.forEach(t => {
                salesBody.innerHTML += `
                    <tr><td class="border p-2">${t.date}</td><td class="border p-2">${t.product}</td><td class="border p-2">${t.quantity}</td><td class="border p-2">$${t.amount.toFixed(2)}</td><td class="border p-2">${t.payment}</td><td class="border p-2">${t.customer}</td><td class="border p-2">${t.momoId || '-'}</td></tr>
                `;
            });
        }

        function updateStockDisplay() {
            const productStockDiv = document.getElementById('product-stock');
            productStockDiv.innerHTML = '';
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow-md');
                productDiv.innerHTML = `
                    <h3 class="text-lg font-semibold">${product.name}</h3>
                    <p class="text-sm">Stock: ${product.stock}</p>
                `;
                productStockDiv.appendChild(productDiv);
            });
        }

        function init() {
            loadProductOptions();
            loadCustomers();
            updateStockDisplay();
            updateLedgers();
        }

        window.onload = init;

        document.getElementById('payment-method').addEventListener('change', (e) => {
            const momoField = document.getElementById('momo-id-field');
            momoField.classList.toggle('hidden', e.target.value !== 'momo');
        });

        document.getElementById('sales-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const product = document.getElementById('product').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            const paymentMethod = document.getElementById('payment-method').value;
            const customer = document.getElementById('customer').value;
            const momoId = document.getElementById('momo-id').value || '';

            const productData = products.find(p => p.name === product);
            if (productData && quantity > 0 && customer) {
                const amount = productData.unitPrice * quantity;
                updateStock(product, -quantity);
                recordTransaction(paymentMethod, product, quantity, amount, customer, momoId);
                updateStockDisplay();
                alert(`Sale recorded! Amount: $${amount.toFixed(2)}`);
            } else {
                alert('Invalid form input');
            }
        });

        document.getElementById('stock-management-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const product = document.getElementById('stock-product').value;
            const quantity = parseInt(document.getElementById('add-stock-quantity').value);
            if (product && quantity > 0) {
                updateStock(product, quantity);
                updateStockDisplay();
                alert(`Stock added! Product: ${product}, Quantity: ${quantity}`);
            } else {
                alert('Invalid stock input');
            }
        });

        document.getElementById('add-customer-button').addEventListener('click', () => {
            const name = prompt('Enter customer name:');
            if (name) addCustomer(name);
        });
    </script>
</body>

</html>